generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            Int           @id @default(autoincrement())
  name          String
  email         String        @unique
  password      String
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt

  favoriteList  FavoriteList?
}

model FavoriteList {
  id          Int               @id @default(autoincrement())
  userId      Int               @unique
  shareToken  String            @unique
  createdAt   DateTime          @default(now())

  user        User              @relation(fields: [userId], references: [id], onDelete: Cascade)
  movies      FavoriteListMovie[]
}

model FavoriteListMovie {
  id               Int           @id @default(autoincrement())
  favoriteListId   Int
  tmdbMovieId      Int           // ID do filme no TMDB
  addedAt          DateTime      @default(now())

  favoriteList     FavoriteList  @relation(fields: [favoriteListId], references: [id], onDelete: Cascade)

  @@unique([favoriteListId, tmdbMovieId])
}
